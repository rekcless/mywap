<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<title>MyWapBlog Dark</title>
</head>

<body>
<header>MYWAPBLOG DARK</header>

<div class="container">
  <div id="posts"></div>
</div>

<script type="module">
  import { db } from "./firebase.js";
  import { collection, query, orderBy, getDocs } 
  from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  async function loadPosts() {
    const q = query(collection(db, "posts"), orderBy("createdAt", "desc"));
    const snap = await getDocs(q);
    let html = "";

    snap.forEach(doc => {
      const p = doc.data();

      html += `
        <div class="post">
          <h2><a href="post.html?id=${doc.id}">${p.title}</a></h2>
          <div class="meta">${p.category} â€¢ ${p.views ?? 0} views</div>
          ${p.thumbnailUrl ? `<img src="${p.thumbnailUrl}">` : ""}
          <p>${p.body.substring(0,100)}...</p>
          <a href="post.html?id=${doc.id}" class="btn">Baca</a>
        </div>
      `;
    });

    document.getElementById("posts").innerHTML = html;
  }

  loadPosts();
</script>
</body>
</html>